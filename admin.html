<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Página Admin</title>
    <style>
        .hidden { display: none; }
        .editable { border: 1px dashed #007BFF; cursor: pointer; }
    </style>
</head>
<body>
    <div id="login-section">
        <h1>Admin Login</h1>
        <input type="password" id="password" placeholder="Digite a senha">
        <button onclick="checkPassword()">Entrar</button>
        <p id="error-message" class="hidden">Senha incorreta</p>
    </div>

    <div id="editor-section" class="hidden">
        <h1>Editor de Página - Edição em Linha</h1>
        <div id="model-container"></div>
        <button onclick="generateHTML()">Baixar Novo HTML</button>
    </div>

    <script>
        const correctPassword = "jadir";

        function checkPassword() {
            const enteredPassword = document.getElementById("password").value;
            if (enteredPassword === correctPassword) {
                document.getElementById("login-section").classList.add("hidden");
                document.getElementById("editor-section").classList.remove("hidden");
                fetchAndLoadModelPage();
            } else {
                document.getElementById("error-message").classList.remove("hidden");
            }
        }

        async function fetchAndLoadModelPage() {
            const response = await fetch('modelo.html');
            const html = await response.text();
            const parser = new DOMParser();
            const doc = parser.parseFromString(html, 'text/html');

            // Exibe o conteúdo da página modelo no admin
            const modelContainer = document.getElementById('model-container');
            modelContainer.innerHTML = doc.body.innerHTML;

            // Torna os elementos editáveis (inline editing)
            makeElementsEditable(doc);
        }

        function makeElementsEditable(doc) {
            // Seleciona todos os links e textos para edição inline
            const container = document.getElementById('model-container');
            const links = container.querySelectorAll('a');
            const texts = container.querySelectorAll('p, h1, h2, h3, h4, h5, h6, span');

            links.forEach((link) => {
                link.classList.add('editable');
                link.contentEditable = true;
                link.addEventListener('click', (e) => {
                    e.preventDefault(); // Evita que o link redirecione
                });
                link.oninput = function () {
                    // Atualiza o href conforme o texto editado
                    link.setAttribute('href', link.textContent);
                };
            });

            texts.forEach((text) => {
                text.classList.add('editable');
                text.contentEditable = true;
                text.oninput = function () {
                    // Edita o texto inline diretamente
                };
            });
        }

        function generateHTML() {
            const container = document.getElementById('model-container');
            const newHtml = `<html><body>${container.innerHTML}</body></html>`;
            const blob = new Blob([newHtml], { type: 'text/html' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = 'novo_modelo.html';
            link.click();
        }
    </script>
</body>
</html>
