<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Página Admin</title>
    <style>
        .hidden { display: none; }
        .editable { position: relative; display: inline-block; }
        .edit-btn {
            background-color: #007BFF;
            color: white;
            padding: 5px;
            font-size: 12px;
            border: none;
            border-radius: 3px;
            cursor: pointer;
            position: absolute;
            top: -10px;
            right: -10px;
            z-index: 10;
        }
        .edit-input {
            border: 1px solid #ccc;
            margin: 5px 0;
            padding: 5px;
            display: block;
            width: 100%;
        }
    </style>
</head>
<body>
    <div id="login-section">
        <h1>Admin Login</h1>
        <input type="password" id="password" placeholder="Digite a senha">
        <button onclick="checkPassword()">Entrar</button>
        <p id="error-message" class="hidden">Senha incorreta</p>
    </div>

    <div id="editor-section" class="hidden">
        <h1>Editor de Página</h1>
        <div id="model-container"></div>
        <button onclick="generateHTML()">Baixar Novo HTML</button>
    </div>

    <script>
        const correctPassword = "jadir";

        function checkPassword() {
            const enteredPassword = document.getElementById("password").value;
            if (enteredPassword === correctPassword) {
                document.getElementById("login-section").classList.add("hidden");
                document.getElementById("editor-section").classList.remove("hidden");
                fetchAndLoadModelPage();
            } else {
                document.getElementById("error-message").classList.remove("hidden");
            }
        }

        async function fetchAndLoadModelPage() {
            const response = await fetch('modelo.html');
            const html = await response.text();
            const parser = new DOMParser();
            const doc = parser.parseFromString(html, 'text/html');

            // Exibe o conteúdo do modelo no admin e preserva estilos
            const modelContainer = document.getElementById('model-container');
            modelContainer.innerHTML = doc.body.innerHTML;

            // Torna os elementos editáveis sem desconfigurar o layout
            makeElementsEditable(doc);
        }

        function makeElementsEditable(doc) {
            const container = document.getElementById('model-container');
            const links = container.querySelectorAll('a');
            const texts = container.querySelectorAll('p, h1, h2, h3, h4, h5, h6, span');

            links.forEach((link) => {
                addEditButton(link, 'href');
            });

            texts.forEach((text) => {
                addEditButton(text, 'text');
            });
        }

        function addEditButton(element, type) {
            const editBtn = document.createElement('button');
            editBtn.textContent = 'Editar';
            editBtn.classList.add('edit-btn');
            editBtn.onclick = () => editElement(element, type);

            element.classList.add('editable');
            element.style.position = 'relative'; // Para permitir posicionar o botão
            element.appendChild(editBtn);
        }

        function editElement(element, type) {
            const currentValue = type === 'href' ? element.getAttribute('href') : element.textContent;
            const input = document.createElement('input');
            input.type = 'text';
            input.classList.add('edit-input');
            input.value = currentValue;

            const saveBtn = document.createElement('button');
            saveBtn.textContent = 'Salvar';
            saveBtn.onclick = () => saveEdit(element, input.value, type);

            element.innerHTML = ''; // Limpa o conteúdo temporariamente
            element.appendChild(input);
            element.appendChild(saveBtn);
        }

        function saveEdit(element, newValue, type) {
            if (type === 'href') {
                element.setAttribute('href', newValue);
                element.textContent = newValue; // Atualiza o texto do link
            } else {
                element.textContent = newValue; // Atualiza o texto normal
            }
        }

        function generateHTML() {
            const container = document.getElementById('model-container');
            const newHtml = `<html><body>${container.innerHTML}</body></html>`;
            const blob = new Blob([newHtml], { type: 'text/html' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = 'novo_modelo.html';
            link.click();
        }
    </script>
</body>
</html>
